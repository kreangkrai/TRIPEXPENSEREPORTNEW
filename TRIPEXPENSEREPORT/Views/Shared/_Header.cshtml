@using Microsoft.AspNetCore.Http
@{
    var userid = Context.Session.GetString("userId");
    var role = Context.Session.GetString("Role");
}

<header class="sticky-top">
    <nav class="main-header navbar navbar-expand navbar-light" style=" background: #034694;
     background: linear-gradient(90deg, rgba(3, 70, 148, 1) 00%, rgba(33, 114, 181, 1) 100%);">

        <!-- LOGO TE REPORT-->
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" asp-controller="Home" asp-action="Index">
                    <img src="~/images/logo_te_bbg.png" style="width:auto; height:25px;" />
                </a>
            </li>
        </ul>

        <!-- NAVBAR TOP-->
        <!--<ul class="nav navbar-nav ml-auto">-->
        <ul class="navbar-nav ml-auto">
            @{
                <!-- For User -->
                <li class="nav-item">
                    <div class="dropdown show" style="font-family:Kanit">
                        <a class="btn dropdown-toggle" style="color:white;" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            For User
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a class="dropdown-item" asp-controller="User" asp-action="Index"><i class="fa-solid fa-car-side"></i> รถส่วนตัว</a>
                            <a class="dropdown-item" asp-controller="Monitor" asp-action="Index"><i class="fa-solid fa-truck-pickup"></i> รถบริษัท</a>
                            <a class="dropdown-item" asp-controller="Device" asp-action="Index"><i class="fa-solid fa-file-invoice-dollar"></i>  เบี้ยเลี้ยง</a>
                        </div>
                    </div>
                </li>

                if (role == "Admin")
                {
                    <!-- For Admin -->
                    <!-- For User -->
                    <li class="nav-item">
                        <div class="dropdown show" style="font-family:Kanit">
                            <a class="btn dropdown-toggle" style="color:white;" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                For Admin
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                <a class="dropdown-item" asp-controller="User" asp-action="Index"><i class="fa-solid fa-car-side"></i> รถส่วนตัว</a>
                                <a class="dropdown-item" asp-controller="Monitor" asp-action="Index"><i class="fa-solid fa-truck-pickup"></i> รถบริษัท</a>
                                <a class="dropdown-item" asp-controller="Device" asp-action="Index"><i class="fa-solid fa-file-invoice-dollar"></i>  เบี้ยเลี้ยง</a>
                            </div>
                        </div>
                    </li>
                    <!-- Summary Company Car -->
                    <li class="nav-item">
                        <div class="dropdown show">
                            <a class="btn dropdown-toggle" style="color:white; font-family:Kanit;" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Summary Company Car
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink" style="font-family:Kanit">
                                <a class="dropdown-item" asp-controller="User" asp-action="Index"><i class="fa-solid fa-car-side"></i> รถส่วนตัว</a>
                                <a class="dropdown-item" asp-controller="Monitor" asp-action="Index"><i class="fa-solid fa-truck-pickup"></i> รถบริษัท</a>
                                <a class="dropdown-item" asp-controller="Device" asp-action="Index"><i class="fa-solid fa-file-invoice-dollar"></i>  เบี้ยเลี้ยง</a>
                                <a class="dropdown-item" asp-controller="Service" asp-action="Index"><i class="fa-solid fa-wrench"></i>  Service Maintenance</a>
                                <a class="dropdown-item" asp-controller="ServiceHistory" asp-action="Index"><i class="fa-solid fa-screwdriver-wrench"></i> Service History</a>
                                <a class="dropdown-item" asp-controller="Borrow" asp-action="Index"><i class="fa-solid fa-calendar-week"></i> Borrow</a>
                            </div>
                        </div>
                    </li>

                    <!-- Setting -->
                    <li class="nav-item">
                        <div class="dropdown show">
                            <a class="btn dropdown-toggle" style="color:white; font-family:Kanit;" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Setting
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink" style="font-family:Kanit">
                                <a class="dropdown-item" asp-controller="User" asp-action="Index"><i class="fa-solid fa-car-side"></i> รถส่วนตัว </a>
                                <a class="dropdown-item" asp-controller="Monitor" asp-action="Index"><i class="fa-solid fa-truck-pickup"></i> รถบริษัท</a>
                                <a class="dropdown-item" asp-controller="Device" asp-action="Index"><i class="fa-solid fa-file-invoice-dollar"></i>  เบี้ยเลี้ยง</a>
                            </div>
                        </div>
                    </li>

                    <!-- Management -->
                    <li class="nav-item">
                        <div class="dropdown show">
                            <a class="btn dropdown-toggle" style="color:white; font-family:Kanit;" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Management
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink" style="font-family:Kanit">
                                <a class="dropdown-item" asp-controller="User" asp-action="Index"><i class="fa-solid fa-car-side"></i> รถส่วนตัว</a>
                                <a class="dropdown-item" asp-controller="Monitor" asp-action="Index"><i class="fa-solid fa-truck-pickup"></i> รถบริษัท</a>
                                <a class="dropdown-item" asp-controller="Device" asp-action="Index"><i class="fa-solid fa-file-invoice-dollar"></i>  เบี้ยเลี้ยง</a>
                            </div>
                        </div>
                    </li>
                }
            }
        </ul>
        <div class="navbar-custom-menu">
            <!-- User Info -->
            <ul class="nav navbar-nav ml-auto">
                <!-- User Account Menu -->
                <li class="dropdown user user-menu">
                    <!-- Menu Toggle Button -->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <!-- The user image in the navbar-->
                        @{
                            byte[] image = Context.Session.Get("Image");
                            var base64 = Convert.ToBase64String(image);
                            var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                            if (@imgSrc != null)
                            {
                                <img src="@imgSrc" class="user-image" alt="User Image">
                            }
                        }
                    </a>

                    <ul class="dropdown-menu" style="background-color: transparent">
                        <li class="user-header " style="height:fit-content; border-radius:10px; background-color: transparent; background: #2178BE;
                background: linear-gradient(180deg, rgba(33, 120, 190, 1) 0%, rgba(21, 52, 88, 1) 100%);color:white">
                            @{
                                if (imgSrc != null)
                                {
                                    <img src="@imgSrc" class="img-circle" alt="User Image">
                                }
                            }

                            <div class="pull-left" style="font-family:Kanit;">
                                <p>
                                    @userid <br />
                                    (@role)
                                </p>
                                <a class="btn btn-secondary" style="color:white; font-family:Kanit; border-radius:5px; background-color:#D04B4D; width:auto; height:35px; box-shadow:0px 4px 10px 0px #333333" asp-area="" asp-controller="Account" asp-action="Logout">Log Out</a>
                            </div>
                        </li>
                    </ul>

                </li>
            </ul>
        </div>
    </nav>
</header>